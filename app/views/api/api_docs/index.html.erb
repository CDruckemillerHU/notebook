<div class="row">
  <div class="col s12 m10 offset-m1 l8 offset-l2">
    <%= image_tag 'logos/both-original.png', style: 'width: 100%' %>
  </div>

  <div class="col s12">
    <div class="card">
      <div class="card-content">
        <div class="card-title">
          Supercharge your projects with Notebook.ai's world-class worldbuilding resources
        </div>

        <div class="row">
          <div class="col s12 m6 l5">
            <br />
            <p>
              <% Rails.application.config.content_types[:all].each do |content_type| %>
                <i class="material-icons small <%= content_type.color %>-text tooltipped" data-tooltip="Interact with <%= content_type.name.downcase.pluralize %>"><%= content_type.icon %></i>
              <% end %>
            </p>
            <br />
            <p>
              We now offer an API for developers that would like to take advantage of the
              features and worlds in Notebook.ai. 
            </p>
            <br />
            <p>
              To get started, you'll want to <%= link_to 'register an application', api_applications_path %>
              and get your API key. In order to access any user's notebook, you'll first need
              them to <%= link_to 'authenticate your application', api_approvals_path %> and give you an
              access key specific to their notebook. 
            </p>
          </div>
          <div class="col s12 m6 l6 offset-l1">
            <p>
              In other words, three easy steps to get started:
            </p>

            <ul class="stepper">
              <li class="step active">
                <div data-step-label="Register your application" class="step-title waves-effect waves-dark">Step 1</div>
                <div class="step-content">
                  <div class="row">
                    <p class="col s12">
                      To receive an access token for your application, you'll first need to register it for use.
                    </p>
                  </div>
                  <div class="step-actions">
                    <%= link_to 'Register application', api_applications_path, class: 'blue white-text btn' %>
                    <button class="waves-effect waves-dark btn white black-text next-step">Next step</button>
                  </div>
                </div>
              </li>
              <li class="step">
                <div data-step-label="Receive user approval" class="step-title waves-effect waves-dark">Step 2</div>
                <div class="step-content">
                  <div class="row">
                    <p class="col s12">
                      In order to access or modify a user's notebook pages on their behalf, you'll first need that user to
                      approve your application. You can set up an approval flow that notifies your application whenever
                      a user authorizes its use, or you can direct them to <%= link_to 'their integrations page', api_integrations_path %>
                      and have them paste their authorization code directly into your app.
                    </p>
                  </div>
                  <div class="step-actions">
                    <%= link_to 'Create approval flow', api_approvals_path, class: 'btn blue white-text' %>
                    <button class="waves-effect waves-dark btn white black-text next-step">Next step</button>
                  </div>
                </div>
              </li>
              <li class="step">
                <div data-step-label="Make API calls!" class="step-title waves-effect waves-dark">Step 3</div>
                <div class="step-content" style="display: none;">
                  <div class="row">
                    <p class="col s12">
                      Once you've received an application token and your first user authorization token, you can start making
                      API calls on that user's behalf. You will need to provide these tokens with every API call.
                    </p>
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div class="col s12">
    <div class="grey-text uppercase">SUPPORTED NOTEBOOK ENDPOINTS</div>
    <ul class="collapsible">
      <% Rails.application.config.content_types[:all].each do |content_type| %>
        <li>
          <div class="collapsible-header">
            <i class="material-icons <%= content_type.color %>-text"><%= content_type.icon %></i>
            Interacting with <%= content_type.name.downcase.pluralize %>
          </div>
          <div class="collapsible-body">
            <%= render partial: 'api/api_docs/endpoints/fetch_all_content',            locals: { content_type: content_type } %>
            <%= render partial: 'api/api_docs/endpoints/fetch_a_specific_content',     locals: { content_type: content_type } %>
            <%= render partial: 'api/api_docs/endpoints/modify_a_specific_content',    locals: { content_type: content_type } %>
            <%= render partial: 'api/api_docs/endpoints/create_a_new_content',         locals: { content_type: content_type } %>
            <%= render partial: 'api/api_docs/endpoints/reference_a_specific_content', locals: { content_type: content_type } %>
            <%= render partial: 'api/api_docs/endpoints/delete_a_specific_content',    locals: { content_type: content_type } %>
          </div>
        </li>
      <% end %>
    </ul>
  </div>
</div>