<%= content_for :full_width_page_header do %>
  <%= render partial: 'content/components/collection_header', locals: { collection: @page_collection } %>
<% end %>

<div class="row">
  <div class="col s12 m9 l8">
    <div class="content-sort-bar center">
      <%= link_to '#', class: 'btn btn-flat' do %>
        <i class="material-icons left">sort</i>
        Trending
      <% end %>
      <%= link_to '#', class: 'btn btn-flat' do %>
        <i class="material-icons left">sort</i>
        Alphabetical
      <% end %>
      <%= link_to '#', class: 'btn btn-flat' do %>
        <i class="material-icons left">sort</i>
        Recently added
      <% end %>
    </div>

    <div class="card-panel">pages already in</div>
  </div>
  <div class="col s12 m3 l4">
    <ul class="collapsible">
      <li>
        <div class="collapsible-header blue white-text">
          <i class="material-icons <%= PageCollection.color %>-text text-darken-2"><%= PageCollection.icon %></i>
          <%= @page_collection.user == current_user ? 'Add' : 'Submit' %> a page
        </div>
        <div class="collapsible-body white">
          <%= form_for [current_user, ContentPageShare.new(user: current_user)] do |f| %>
            <div class="row">
              <div class="col s12 m6 l6">
                <div class="input-field col s12">
                  <%= f.select :content_page do %>
                    <% @current_user_content.each do |content_type, content_list| %>
                      <optgroup label="<%= content_type.pluralize %>">
                        <% content_list.each do |content| %>
                          <option value="<%= content_type %>-<%= content.id %>"><%= content.name %></option>
                        <% end %>
                      </optgroup>
                    <% end %>
                  <% end %>
                  <label>1. Select a page to share</label>
                  <div class="helper-text">
                    Only pages you've marked "public" may be shared.
                  </div>
                </div>
              </div>
              <div class="col s12 m6 l6">
                <div class="input-field">
                  <%= f.text_area :message, class: 'materialize-textarea' %>
                  <%= f.label :message, '2. Write a question or message about your page.' %>
                </div>
              </div>
              <div class="col s12">
                <%= f.submit 'Share', class: 'btn green white-text right' %>
              </div>
            </div>
          <% end %>
          <span>Lorem ipsum dolor sit amet.</span>
        </div>
      </li>
    </ul>

    <div class="card-panel">Collection description (editable)</div>
    <div class="card-panel">
      <% @page_collection.page_types.each do |pt| %>
        <% klass = pt.constantize %>
        <%= link_to '#' + pt do %>
          <span class="badge hoverable black-text <%= klass.color %> left"><%= pt.downcase %></span>
        <% end %>
      <% end %>
    </div>
    <div class="card-panel">
      Contributors
    </div>
    <ul>
      <li><%= link_to pluralize(0, 'pending submission'), '#' %></li>
      <li><%= link_to 'Edit this collection', '#' %></li>
    </ul>
  </div>
</div>